<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VN POI Finder â€“ 5 Ä‘iá»ƒm ná»•i báº­t</title>

  <!-- Tailwind (CDN) â€“ dÃ¹ng cho giao diá»‡n -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Leaflet (OSM) â€“ thÆ° viá»‡n báº£n Ä‘á»“ -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- CSS riÃªng cá»§a app -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-slate-50">
  <!-- Top bar: thanh tÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm chÃ­nh -->
  <header class="fixed top-0 left-0 right-0 z-[10000] bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="mx-auto max-w-5xl px-4 py-3 flex items-center gap-3">
      <div class="text-xl font-semibold tracking-tight">VN POI Finder</div>
      <form id="searchForm" class="flex-1 relative" autocomplete="off">
        <div class="flex items-center gap-2 bg-white rounded-2xl shadow-sm ring-1 ring-slate-200 px-3 py-2">
          <input id="placeInput" type="text" required
                 class="w-full outline-none bg-transparent placeholder:text-slate-400"
                 placeholder="Nháº­p tÃªn Ä‘á»‹a Ä‘iá»ƒm á»Ÿ Viá»‡t Nam (vd: Quáº­n 1, ÄÃ  Náºµng, VÅ©ng TÃ u)â€¦" />
          <button id="searchBtn" type="submit" class="shrink-0 rounded-xl px-3 py-1.5 bg-slate-900 text-white text-sm hover:opacity-90">
            TÃ¬m
          </button>
        </div>
      </form>
      <!-- ========= THÃŠM Má»šI: khu vá»±c hiá»ƒn thá»‹ account ========= -->
    <div id="authSection" class="flex items-center gap-2">
      <div id="authUserInfo" class="hidden text-sm text-slate-700">
        Xin chÃ o, <span id="authUserEmail" class="font-semibold"></span>
      </div>

      <button id="openAuthModalBtn" type="button"
              class="rounded-xl px-3 py-1.5 text-sm border border-slate-300 text-slate-700 hover:bg-slate-100">
        ÄÄƒng nháº­p / ÄÄƒng kÃ½
      </button>

      <button id="signOutBtn" type="button"
              class="hidden rounded-xl px-3 py-1.5 text-sm bg-red-500 text-white hover:bg-red-600">
        ÄÄƒng xuáº¥t
      </button>
    </div>
    <!-- ========= Háº¾T PHáº¦N THÃŠM ========= -->
  </div>
  </header>

  <!-- Map chÃ­nh -->
  <div id="map" class="w-full"></div>

  <!-- Ã” tra cá»©u & hiá»ƒn thá»‹ thá»i tiáº¿t (á»Ÿ gÃ³c trÃªn bÃªn pháº£i) -->
  <div class="weather-box">
    <h2>Tra cá»©u thá»i tiáº¿t</h2>
    <label for="cityInput">Nháº­p Ä‘á»‹a Ä‘iá»ƒm (vÃ­ dá»¥: Ho Chi Minh City, Vietnam):</label>
    <input id="cityInput" type="text" placeholder="Ho Chi Minh City, Vietnam">
    <button id="searchWeatherBtn">Xem thá»i tiáº¿t</button>

    <p id="weatherError" style="color: red;"></p>

    <div id="weatherResult" style="display: none; margin-top: 10px;">
      <h3>Thá»i tiáº¿t hiá»‡n táº¡i á»Ÿ <span id="weatherCityName"></span></h3>
      <div style="display: flex; align-items: center; gap: 10px;">
        <img id="weatherIcon" alt="" style="width: 60px; height: 60px; display: none;">
        <div>
          <p>Nhiá»‡t Ä‘á»™: <span id="weatherTemp"></span> Â°C</p>
          <p>Äá»™ áº©m: <span id="weatherHumidity"></span>%</p>
          <p>Tá»‘c Ä‘á»™ giÃ³: <span id="weatherWind"></span> m/s</p>
          <p>MÃ´ táº£: <span id="weatherDescription"></span></p>
        </div>
      </div>
    </div>
  </div>
    <!-- Popup dá»‹ch thuáº­t nhá» -->
  <div id="translateBox" class="translate-box hidden">
    <h2>ğŸˆ¹ Dá»‹ch nhanh</h2>
    <label for="enInput">Nháº­p cÃ¢u tiáº¿ng Anh:</label>
    <textarea id="enInput" rows="3" placeholder="Nháº­p cÃ¢u tiáº¿ng Anh..."></textarea>
    <button id="translateBtn">Dá»‹ch sang tiáº¿ng Viá»‡t</button>

    <p id="translateError" style="color:red;"></p>

    <div id="translateResult" style="display:none; margin-top:10px;">
      <h3>Káº¿t quáº£ dá»‹ch:</h3>
      <p id="viOutput" class="text-sm text-slate-700"></p>
    </div>
  </div>

  <button id="toggleTranslateBox" class="translate-btn">
    ğŸŒ Dá»‹ch
  </button>



  <!-- Panel hiá»ƒn thá»‹ 5 POI ná»•i báº­t -->
  <aside id="panel" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-[10001] w-[min(92vw,680px)] bg-white rounded-2xl shadow-xl ring-1 ring-slate-200 p-3 hidden">
    <div class="flex items-center justify-between px-2 py-1">
      <h2 class="font-semibold">Top 5 Ä‘iá»ƒm gáº§n <span id="areaName" class="font-semibold text-slate-700"></span></h2>
      <button id="closePanel" class="text-slate-500 text-sm hover:text-slate-800">ÄÃ³ng</button>
    </div>
    <ul id="results" class="divide-y divide-slate-200"></ul>
  </aside>
  
  <!-- ========= THÃŠM Má»šI: Modal Ä‘Äƒng nháº­p / Ä‘Äƒng kÃ½ ========= -->
  <div id="authModal" class="fixed inset-0 z-[10002] bg-black/40 flex items-center justify-center hidden">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold">TÃ i khoáº£n</h2>
        <button id="closeAuthModalBtn" class="text-slate-500 hover:text-slate-800">&times;</button>
      </div>

      <div class="space-y-3">
        <label class="block text-sm">
          Email
          <input id="authEmail" type="email"
                 class="mt-1 w-full border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-400"
                 placeholder="you@example.com" />
        </label>

        <label class="block text-sm">
          Máº­t kháº©u
          <input id="authPassword" type="password"
                 class="mt-1 w-full border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-400"
                 placeholder="Ãt nháº¥t 6 kÃ½ tá»±" />
        </label>

        <p id="authError" class="text-xs text-red-500 min-h-[1rem]"></p>

        <div class="flex gap-2">
          <button id="signUpBtn" type="button"
                  class="flex-1 rounded-xl px-3 py-2 text-sm bg-slate-900 text-white hover:bg-slate-800">
            ÄÄƒng kÃ½
          </button>
          <button id="signInBtn" type="button"
                  class="flex-1 rounded-xl px-3 py-2 text-sm border border-slate-300 hover:bg-slate-50">
            ÄÄƒng nháº­p
          </button>
        </div>

        <div class="flex items-center my-3">
          <div class="flex-1 h-px bg-slate-200"></div>
          <span class="px-2 text-xs text-slate-400">hoáº·c</span>
          <div class="flex-1 h-px bg-slate-200"></div>
        </div>

        <button id="googleSignInBtn" type="button"
                class="w-full rounded-xl px-3 py-2 text-sm border border-slate-300 hover:bg-slate-50 flex items-center justify-center gap-2">
          <span>ÄÄƒng nháº­p báº±ng Google</span>
        </button>
      </div>
    </div>
  </div>
  <!-- ========= Háº¾T PHáº¦N THÃŠM ========= -->
  <!-- Firebase (CDN) â€“ Ä‘á»ƒ dÃ¹ng auth + firestore -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <!-- JS chÃ­nh cá»§a á»©ng dá»¥ng (map, POI, weather, firebase...) -->
  <script src="main.js"></script>
</body>
</html>
